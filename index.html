<!DOCTYPE html>
<html>
<head>
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xolosArmy Network State DEX</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

        body {
            font-family: 'Orbitron', sans-serif;
            line-height: 1.6;
            color: #fff;
            margin: 0;
            padding: 0;
            background-color: #000;
            background-image: 
                linear-gradient(to bottom, rgba(255,0,0,0.2) 0%, rgba(0,0,0,0.2) 100%),
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'%3E%3Cdefs%3E%3ClinearGradient id='a' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23000'/%3E%3Cstop offset='1' stop-color='%23600'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpattern id='b' width='24' height='24' patternUnits='userSpaceOnUse'%3E%3Ccircle fill='%23fff' cx='12' cy='12' r='1'/%3E%3C/pattern%3E%3Crect width='100%25' height='100%25' fill='url(%23a)'/%3E%3Crect width='100%25' height='100%25' fill='url(%23b)' fill-opacity='0.1'/%3E%3C/svg%3E");
            background-attachment: fixed;
            background-size: cover;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cpath d='M100 0 L200 200 L0 200 Z' fill='rgba(255,0,0,0.1)'/%3E%3C/svg%3E") repeat;
            animation: thunderbolt 10s linear infinite;
            z-index: -1;
        }

        @keyframes thunderbolt {
            0% { transform: translateY(0) rotate(0deg); }
            100% { transform: translateY(50%) rotate(360deg); }
        }

        h1 {
            margin-bottom: 0;
            font-size: 2.5em;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
        }

        main {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
            margin-top: 20px;
        }

        .exchange-form, .liquidity-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        input, button {
            padding: 15px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-family: 'Orbitron', sans-serif;
        }

        input:focus {
            outline: none;
            box-shadow: 0 0 5px rgba(255, 0, 0, 0.5);
        }

        button {
            background-color: #ff0000;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            text-transform: uppercase;
            font-weight: bold;
        }

        button:hover {
            background-color: #ff3333;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(1px);
        }

        #status, #transactionHistory, #walletInfo, #liquidityStatus {
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        #transactionHistory, #walletInfo {
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 20px;
        }

        #transactions {
            list-style-type: none;
            padding: 0;
        }

        #transactions li {
            margin-bottom: 10px;
        }

        #transactions a {
            color: #ff6666;
            text-decoration: none;
            transition: color 0.3s;
        }

        #transactions a:hover {
            color: #ff9999;
        }

        h2 {
            color: #ff3333;
            border-bottom: 2px solid #ff3333;
            padding-bottom: 10px;
            margin-top: 30px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.6.0/dist/web3.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Xolos Army DEX</h1>
            <p>A decentralized exchange for Xolos $RMZ Token</p>
        </header>
        <main>
            <div id="walletInfo">
                <h2>Wallet Information</h2>
                <p>Address: <span id="walletAddress">Not connected</span></p>
                <p>Balance: <span id="walletBalance">0</span> BCH</p>
                <button onclick="connectWallet()">Connect Wallet</button>
            </div>
            <h2>Exchange BCH for Xolos $RMZ</h2>
            <div class="exchange-form">
                <input type="number" id="bchAmount" placeholder="BCH amount">
                <input type="number" id="minTokens" placeholder="Minimum tokens to receive">
                <button onclick="swapBCHForToken()">Exchange</button>
            </div>
            <h2>Exchange Xolos $RMZ for BCH</h2>
            <div class="exchange-form">
                <input type="number" id="tokenAmount" placeholder="Xolos $RMZ amount">
                <input type="number" id="minBCH" placeholder="Minimum BCH to receive">
                <button onclick="swapTokenForBCH()">Exchange</button>
            </div>
            <div id="status"></div>
            <div id="transactionHistory">
                <h2>Transaction History</h2>
                <ul id="transactions"></ul>
            </div>

            <h2>Add Liquidity</h2>
            <div class="liquidity-form">
                <input type="number" id="liquidityBchAmount" placeholder="BCH amount">
                <input type="number" id="liquidityRmzAmount" placeholder="Xolos $RMZ amount">
                <button onclick="addLiquidity()">Add Liquidity</button>
            </div>
            <h2>Remove Liquidity</h2>
            <div class="liquidity-form">
                <input type="number" id="removeLiquidityAmount" placeholder="Liquidity amount to remove">
                <button onclick="removeLiquidity()">Remove Liquidity</button>
            </div>
            <div id="liquidityStatus"></div>
        </main>
    </div>
    <script>
        const tokenAddress = '0x49F9ECF126B6dDF51C731614755508A4674bA7eD';
        const liquidityPoolAddress = '0x948134045c356Ba9C72E8cB4C9f4aA93d68506C7';
        const explorerBaseUrl = 'https://smartscout.cash/tx/';
        let wallet = null;
        let web3;
        let liquidityPoolContract;

        const liquidityPoolABI = [
            {
                "inputs": [
                    {
                        "internalType": "uint256",
                        "name": "tokenAmount",
                        "type": "uint256"
                    }
                ],
                "name": "addLiquidity",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "payable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "_token",
                        "type": "address"
                    }
                ],
                "stateMutability": "nonpayable",
                "type": "constructor"
            },
            {
                "anonymous": false,
                "inputs": [
                    {
                        "indexed": true,
                        "internalType": "address",
                        "name": "provider",
                        "type": "address"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "amountBCH",
                        "type": "uint256"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "amountToken",
                        "type": "uint256"
                    }
                ],
                "name": "LiquidityAdded",
                "type": "event"
            },
            {
                "anonymous": false,
                "inputs": [
                    {
                        "indexed": true,
                        "internalType": "address",
                        "name": "provider",
                        "type": "address"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "amountBCH",
                        "type": "uint256"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "amountToken",
                        "type": "uint256"
                    }
                ],
                "name": "LiquidityRemoved",
                "type": "event"
            },
            {
                "inputs": [
                    {
                        "internalType": "uint256",
                        "name": "amount",
                        "type": "uint256"
                    }
                ],
                "name": "removeLiquidity",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "uint256",
                        "name": "minTokens",
                        "type": "uint256"
                    }
                ],
                "name": "swapBCHForToken",
                "outputs": [],
                "stateMutability": "payable",
                "type": "function"
            },
            {
                "anonymous": false,
                "inputs": [
                    {
                        "indexed": true,
                        "internalType": "address",
                        "name": "swapper",
                        "type": "address"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "amountIn",
                        "type": "uint256"
                    },
                    {
                        "indexed": false,
                        "internalType": "uint256",
                        "name": "amountOut",
                        "type": "uint256"
                    },
                    {
                        "indexed": false,
                        "internalType": "bool",
                        "name": "isBCHToToken",
                        "type": "bool"
                    }
                ],
                "name": "Swapped",
                "type": "event"
            },
            {
                "inputs": [
                    {
                        "internalType": "uint256",
                        "name": "tokenAmount",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "minBCH",
                        "type": "uint256"
                    }
                ],
                "name": "swapTokenForBCH",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "account",
                        "type": "address"
                    }
                ],
                "name": "balanceOf",
                "outputs": [
                    {
                        "internalType": "uint256",
                        "name": "",
                        "type": "uint256"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            }
        ];

        async function connectWallet() {
            if (window.ethereum) {
                web3 = new Web3(window.ethereum);
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    wallet = accounts[0];
                    document.getElementById('walletAddress').innerText = wallet;
                    updateBalance();
                } catch (error) {
                    console.error("User denied account access", error);
                }
            } else {
                alert("Please install MetaMask!");
            }
        }

        async function updateBalance() {
            const balance = await web3.eth.getBalance(wallet);
            document.getElementById('walletBalance').innerText = web3.utils.fromWei(balance, 'ether');
        }

        async function swapBCHForToken() {
            const bchAmount = document.getElementById('bchAmount').value;
            const minTokens = document.getElementById('minTokens').value;
            const contract = new web3.eth.Contract(liquidityPoolABI, liquidityPoolAddress);

            try {
                await contract.methods.swapBCHForToken(minTokens).send({ from: wallet, value: web3.utils.toWei(bchAmount, 'ether') });
                document.getElementById('status').innerText = 'Swap successful!';
                addTransaction('BCH to RMZ');
            } catch (error) {
                console.error("Swap failed", error);
                document.getElementById('status').innerText = 'Swap failed!';
            }
        }

        async function swapTokenForBCH() {
            const tokenAmount = document.getElementById('tokenAmount').value;
            const minBCH = document.getElementById('minBCH').value;
            const contract = new web3.eth.Contract(liquidityPoolABI, liquidityPoolAddress);

            try {
                await contract.methods.swapTokenForBCH(tokenAmount, minBCH).send({ from: wallet });
                document.getElementById('status').innerText = 'Swap successful!';
                addTransaction('RMZ to BCH');
            } catch (error) {
                console.error("Swap failed", error);
                document.getElementById('status').innerText = 'Swap failed!';
            }
        }

        async function addLiquidity() {
            const bchAmount = document.getElementById('liquidityBchAmount').value;
            const rmzAmount = document.getElementById('liquidityRmzAmount').value;
            const contract = new web3.eth.Contract(liquidityPoolABI, liquidityPoolAddress);

            try {
                await contract.methods.addLiquidity(rmzAmount).send({ from: wallet, value: web3.utils.toWei(bchAmount, 'ether') });
                document.getElementById('liquidityStatus').innerText = 'Liquidity added!';
                addTransaction('Add Liquidity');
            } catch (error) {
                console.error("Add liquidity failed", error);
                document.getElementById('liquidityStatus').innerText = 'Add liquidity failed!';
            }
        }

        async function removeLiquidity() {
            const liquidityAmount = document.getElementById('removeLiquidityAmount').value;
            const contract = new web3.eth.Contract(liquidityPoolABI, liquidityPoolAddress);

            try {
                await contract.methods.removeLiquidity(liquidityAmount).send({ from: wallet });
                document.getElementById('liquidityStatus').innerText = 'Liquidity removed!';
                addTransaction('Remove Liquidity');
            } catch (error) {
                console.error("Remove liquidity failed", error);
                document.getElementById('liquidityStatus').innerText = 'Remove liquidity failed!';
            }
        }

        function addTransaction(type) {
            const transactionsList = document.getElementById('transactions');
            const newTransaction = document.createElement('li');
            newTransaction.innerHTML = `<a href="${explorerBaseUrl}" target="_blank">${type}</a>`;
            transactionsList.appendChild(newTransaction);
        }
    </script>
</body>
</html>
